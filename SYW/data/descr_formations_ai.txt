begin_formation ai_defend_line

   ;;; purpose flags
   defend
   
      ai_priority       0.5

      ;; line infantry center
      begin_block 0
	     min_units 1
	     max_units 2
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         missile infantry 1.0
         default_melee_state     skirmish
         unit_density         close
         block_formation         line
         block_relative_pos      0 0.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  ;; artillery_right
      begin_block 1
		 not_general
         unit_type         siege       1.0
         default_melee_state     fire_at_will
         unit_density         close
         block_formation         line
         block_relative_pos      0 12.5 0.0
         inter_unit_spacing      6
         priority       0.5
      end_block
	  
	  ;; artillery_left
      begin_block 2
		 not_general
         unit_type         siege       1.0
         default_melee_state     fire_at_will
         unit_density         close
         block_formation         line
         block_relative_pos      0 -12.5 0.0
         inter_unit_spacing      6
         priority       0.5
      end_block
	  
      ;; line infantry front right
      begin_block 3
	     max_units 2
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         heavy infantry 1.0
		 unit_type         missile infantry 1.0
         default_melee_state     skirmish
         unit_density         close
         block_formation         line
         block_relative_pos      1 25.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  	  
      ;; line infantry front left
      begin_block 4
	     max_units 2
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         missile infantry 1.0
         default_melee_state     skirmish
         unit_density         close
         block_formation         line
         block_relative_pos      2 -25.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  
	  ;; line infantry second line
      begin_block 5
	     max_units 4
		 not_general
         unit_type         spearmen infantry 1.0
         default_melee_state     hold_fire_and_defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 0.0 -150.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  ;; line infantry reserves
      begin_block 6
	     max_units 6
		 not_general
         unit_type         spearmen infantry 1.0
         default_melee_state     hold_fire_and_defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 25.0 -300.0
         inter_unit_spacing     6
         priority       0.1
      end_block
	  
	  ;; light infantry right
      begin_block 7
		 not_general
         unit_type         light infantry 1.0
         default_melee_state     skirmish
         unit_density         loose
         block_formation         line
         block_relative_pos      3 50.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  	  ;; light infantry left
      begin_block 8
		 not_general
         unit_type         light infantry 1.0
         default_melee_state     skirmish
         unit_density         loose
         block_formation         line
         block_relative_pos      4 -50.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  
	  ;; cavalry_screen
      begin_block 9
		 not_general
         unit_type         skirmish cavalry     1.0
         default_melee_state     skirmish
         unit_density         close
         block_formation         line
         block_relative_pos      8 -50.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  	  
	  ;; generals
      begin_block 10
         max_units 1
         unit_type         general_unit      1.0
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 0 -220.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  
	  ;; cavalry_screen
      begin_block 11
		 not_general
         unit_type         skirmish cavalry     1.0
         default_melee_state     skirmish
         unit_density         loose
         block_formation         line
         block_relative_pos      7 50.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  	  
	  
	  ;; heavy_cavalry
      begin_block 12
		 not_general
         unit_type         heavy cavalry 1.0
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 -50.0 -200.0
         inter_unit_spacing     6
         priority       0.12
      end_block
	  
	  ;; light_cavalry
      begin_block 13
		 not_general
         unit_type         light cavalry 1.0
		 unit_type         missile cavalry 1.0
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      12 0.0 -50.0
         inter_unit_spacing     6
         priority       0.12
      end_block
	  
	  ;; reserve artillery
      begin_block 14
		 not_general
         unit_type         artillery      1.0
		 unit_type         handler        1.0
		 unit_type         any         0.1
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 0 -250.0
         inter_unit_spacing     6
         priority       0.5
      end_block

end_formation

;;;;;;;;;;;;;;;;;;;;;aggressive stance;;;;;;;;;;;;;;;;;;;;;;;;;;;
begin_formation ai_attack_line

   ;;; purpose flags
   attack
   defend
   
      ai_priority       0.8

      ;; line infantry center
      begin_block 0
	     min_units 1
	     max_units 2
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         missile infantry 1.0
         default_melee_state     skirmish
         unit_density         close
         block_formation         line
         block_relative_pos      0 0.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  ;; artillery_right
      begin_block 1
		 not_general
         unit_type         siege       1.0
         default_melee_state     fire_at_will
         unit_density         close
         block_formation         line
         block_relative_pos      0 12.5 0.0
         inter_unit_spacing      6
         priority       0.5
      end_block
	  
	  ;; artillery_left
      begin_block 2
		 not_general
         unit_type         siege       1.0
         default_melee_state     fire_at_will
         unit_density         close
         block_formation         line
         block_relative_pos      0 -12.5 0.0
         inter_unit_spacing      6
         priority       0.5
      end_block
	  
      ;; line infantry front right
      begin_block 3
	     max_units 2
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         heavy infantry 1.0
		 unit_type         missile infantry 1.0
         default_melee_state     skirmish
         unit_density         close
         block_formation         line
         block_relative_pos      1 25.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  	  
      ;; line infantry front left
      begin_block 4
	     max_units 2
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         missile infantry 1.0
         default_melee_state     skirmish
         unit_density         close
         block_formation         line
         block_relative_pos      2 -25.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  
	  ;; line infantry second line
      begin_block 5
	     max_units 4
		 not_general
         unit_type         spearmen infantry 1.0
         default_melee_state     hold_fire_and_defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 0.0 -150.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  ;; line infantry reserves
      begin_block 6
	     max_units 6
		 not_general
         unit_type         spearmen infantry 1.0
         default_melee_state     hold_fire_and_defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 25.0 -300.0
         inter_unit_spacing     6
         priority       0.1
      end_block
	  
	  ;; light infantry right
      begin_block 7
		 not_general
         unit_type         light infantry 1.0
         default_melee_state     fire_at_will
         unit_density         loose
         block_formation         line
         block_relative_pos      3 50.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  	  ;; light infantry left
      begin_block 8
		 not_general
         unit_type         light infantry 1.0
         default_melee_state     fire_at_will
         unit_density         loose
         block_formation         line
         block_relative_pos      4 -50.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  
	  ;; heavy_cavalry_left
      begin_block 9
		 not_general
         unit_type         heavy cavalry     1.0
         default_melee_state     fire_at_will
         unit_density         close
         block_formation         line
         block_relative_pos      8 -50.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  
	  ;; cavalry_screen
      begin_block 10
		 not_general
         unit_type         skirmish cavalry     1.0
         default_melee_state     skirmish
         unit_density         close
         block_formation         line
         block_relative_pos      9 0.0 150.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  	  
	  
	  ;; light_cavalry_left
      begin_block 11
		 not_general
         unit_type         light cavalry     1.0
		 unit_type         missile cavalry     1.0
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      9 0.0 -50.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  ;; cavalry_reserve
      begin_block 12
		 not_general
         unit_type         heavy cavalry 1.0
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 -50.0 -200.0
         inter_unit_spacing     6
         priority       0.12
      end_block
	  
	  	  
	  ;; generals
      begin_block 13
	     min_units 1
         max_units 1
         unit_type         general_unit      1.0
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 0 -220.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  ;; heavy_cavalry_right
      begin_block 14
		 not_general
         unit_type         heavy cavalry     1.0
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      7  50.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  ;; cavalry_screen
      begin_block 15
		 not_general
         unit_type         skirmish cavalry     1.0
         default_melee_state     skirmish
         unit_density         loose
         block_formation         line
         block_relative_pos      14 150.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  	  
	  
	  ;; light_cavalry_right
      begin_block 16
		 not_general
         unit_type         light cavalry     1.0
		 unit_type         missile cavalry     1.0
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      14 0.0 -50.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  ;; reserve artillery
      begin_block 17
		 not_general
         unit_type         artillery      1.0
		 unit_type         handler        1.0
		 unit_type         any         0.1
         default_melee_state     defend
         unit_density         close
         block_formation         line
         block_relative_pos      0 0 -250.0
         inter_unit_spacing     6
         priority       0.5
      end_block

end_formation


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;marching column;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

begin_formation ai_march_column

   ;;; purpose flags
   march
   pursue
   
      ai_priority       0.8

      ;; line infantry front
      begin_block 0
	     min_units 1
	     max_units 3
		 not_general
		 unit_type         heavy infantry 1.0
         unit_type         spearmen infantry 0.8
		 unit_type         missile infantry 0.8
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      0 0.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  ;; line infantry center
      begin_block 1
	     min_units 1
	     max_units 3
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         missile infantry 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      0 0.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  begin_block 2
	     min_units 1
	     max_units 3
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         missile infantry 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      0 0.0 -12.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  	begin_block 3
	     min_units 1
	     max_units 3
		 not_general
         unit_type         artillery  1.0
		 unit_type         handler 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      2 0.0 -12.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	 begin_block 4
	     min_units 1
	     max_units 5
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         artillery 1.0
		 unit_type         handlers 1.0
		 unit_type         missile infantry 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      3 0.0 -12.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  begin_block 5
	     min_units 1
	     max_units 5
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         missile infantry 1.0
		 unit_type         any 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      4 0.0 -12.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  begin_block 6
	     min_units 1
	     max_units 5
		 not_general
         unit_type         spearmen infantry 1.0
		 unit_type         missile infantry 1.0
		 unit_type         any 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      5 0.0 -12.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	 begin_block 7
	     min_units 1
	     max_units 5
		 not_general
         unit_type         light infantry 1.0
         unit_type         light cavalry 0.5
		 unit_type         any 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      4 -25.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	 begin_block 8
	     min_units 1
	     max_units 5
		 not_general
         unit_type         light infantry 1.0
         unit_type         light cavalry 0.5
		 unit_type         any 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      4 25.0 0.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  begin_block 9
	     min_units 1
	     max_units 5
		 unit_type         general_unit 1.0
		 unit_type         any 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      0 0.0 6.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  begin_block 10
	     min_units 1
	     max_units 5
		 not_general
		 unit_type         heavy_cavalry 1.0
		 unit_type         any 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      9 0.0 6.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  begin_block 11
	     min_units 1
	     max_units 5
		 not_general
		 unit_type         missile_cavalry 1.0
		 unit_type         any 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      10 0.0 6.0
         inter_unit_spacing     6
         priority       0.5
      end_block
	  
	  begin_block 12
	     min_units 1
	     max_units 5
		 not_general
		 unit_type         light_cavalry 1.0
		 unit_type         skirmish_cavalry 1.0
		 unit_type         light_infantry 0.5
		 unit_type         any 1.0
         default_melee_state     hold_fire 
         unit_density         close
		 min_unit_width 6
		 max_unit_width 12
         block_formation         line
         block_relative_pos      11 0.0 6.0
         inter_unit_spacing     6
         priority       0.5
      end_block

	  
end_formation